webpackJsonp([1],{"4igE":function(t,e,n){t.exports=n.p+"static/img/logo-bj.afa9c25.jpg"},"4qwy":function(t,e){},"6wUV":function(t,e){},"9cFS":function(t,e){},Gj0j:function(t,e,n){t.exports=n.p+"static/img/logonameimg.51a331b.png"},HBSQ:function(t,e){},MgwY:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("VCXJ"),o=n("4YfN"),i=n.n(o),a=n("9rMa"),c=n("sYY+"),r=n.n(c),l={name:"top",data:function(){return{left:!1,name:localStorage.getItem("name"),nameImg:"",pushTitle:"",pushCont:"",tagState:[],pushTag:[{value:"Javascript"},{value:"Webpack"},{value:"Sass"},{value:"Nodejs"},{value:"Vue"}]}},computed:i()({},Object(a.c)(["pushShow"])),methods:{cleanlocal:function(){this.$store.commit("cleanlocal")},addShow:function(){this.$store.commit("addShow")},newModClose:function(t){"pushNews pushNewsAni"!=t.target.className&&"fa fa-close fa-2x"!=t.target.className||this.$store.commit("cloShow")},addTagState:function(t,e){if(this.tagState.includes(t)){var n=this.tagState.indexOf(t);this.tagState.splice(n,n+1)}else this.tagState.push(t);e.stopPropagation()},addNews:function(){var t=this;if(this.$store.dispatch("pushNews",[this.pushTitle,this.pushCont,this.tagState]),this.pushShow){this.pushTitle=this.pushCont="",this.tagState=[];var e=new r.a("#pushedi");e.customConfig.onchange=function(e){t.pushCont=e},e.create(),e.txt.html("请输入内容");var n=document.querySelectorAll(".operation label input");for(var s in n.length)n[s].checked=!1}}},mounted:function(){var t=this,e=new r.a("#pushedi");e.customConfig.onchange=function(e){t.pushCont=e},e.create(),e.txt.html("请输入内容")}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"top"},[s("img",{attrs:{src:n("4igE"),alt:""}}),t._v(" "),s("nav",[s("div",{staticClass:"menu",on:{click:function(e){t.left=!t.left}}},[s("span"),t._v(" "),s("span"),t._v(" "),s("span")]),t._v(" "),s("div",{class:t.left?"menu-list left":"menu-list"},[s("li",[s("router-link",{attrs:{to:"/"}},[t._v("Home")])],1),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/about"}},[t._v("About")])],1)])]),t._v(" "),s("div",{staticClass:"logo"},[s("img",{attrs:{src:n("Gj0j"),alt:""}}),t._v(" "),t.name?s("p",[s("a",[t._v(t._s(t.name))]),t._v(" "),s("a",{on:{click:t.cleanlocal}},[t._v("退出")]),t._v(" "),s("a",{on:{click:t.addShow}},[t._v("发表文章")])]):t._e(),t._v(" "),t.name?t._e():s("p",{attrs:{onclick:"window.location.reload()"}},[s("a",[t._v("去登录")])]),t._v(" "),s("p",[t._v("梦想还是要有的，万一实现了呢")])])]),t._v(" "),s("div",{staticClass:"pushNews",class:t.pushShow?"pushNewsAni":"",on:{click:function(e){t.newModClose(e)}}},[s("div",{staticClass:"push-container"},[s("i",{staticClass:"fa fa-close fa-2x",on:{click:function(e){t.newModClose(e)}}}),t._v(" "),s("div",{staticClass:"opacmod"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.pushTitle,expression:"pushTitle"}],ref:"",attrs:{type:"text",placeholder:"标题"},domProps:{value:t.pushTitle},on:{input:function(e){e.target.composing||(t.pushTitle=e.target.value)}}}),t._v(" "),s("div",{staticStyle:{"text-align":"left"},attrs:{id:"pushedi"}}),t._v(" "),s("div",{staticClass:"operation"},[s("p",[t._v("文章文类：")]),t._v(" "),t._l(t.pushTag,function(e,n){return s("label",{key:n,attrs:{for:e.value}},[s("input",{attrs:{type:"checkbox",id:e.value},domProps:{value:e.value},on:{click:function(n){t.addTagState(e.value,n)}}}),t._v("\r\n                    "+t._s(e.value)+"\r\n                    ")])}),t._v(" "),s("button",[t._v("清空内容")]),t._v(" "),s("button",{on:{click:t.addNews}},[t._v("确定修改")])],2)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{attrs:{href:"https://github.com/ZongDuCha/bmob-blog",target:"_blank"}},[this._v("Github")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{attrs:{href:"https://juejin.im/user/599ef403518825243217317c",target:"_blank"}},[this._v("Juejin")])])}]};var m=n("8AGX")(l,u,!1,function(t){n("kARj")},null,null).exports,d={name:"login",data:function(){return{clickMenu:!0}},computed:i()({},Object(a.c)(["err","inputState","loginBJ","mesState"])),methods:{inUser:function(){this.$store.dispatch("inStats",{inUser:this.$refs.inStats.value})},signIn:function(){this.$store.dispatch("inStats",{inUser:this.$refs.inStats.value,inPassword:this.$refs.inPass.value})},signUp:function(){this.$store.dispatch("signUp",{upUser:this.$refs.upStats.value,upPass:this.$refs.upPass.value})},skip:function(){this.$store.commit("skip")},errState:function(){this.$store.commit("errState")}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{staticClass:"login-container"},[n("div",{staticClass:"login-title"},[t._v("\n            ZongDuSir\n        ")]),t._v(" "),n("div",{staticClass:"statsMenu"},[n("li",{class:t.clickMenu?"active":"",on:{click:function(e){t.clickMenu=!0,t.errState()}}},[t._v("Sign in")]),t._v(" "),n("li",{class:t.clickMenu?"":"active",on:{click:function(e){t.clickMenu=!1,t.errState()}}},[t._v("Sign up")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.clickMenu,expression:"clickMenu"}],staticClass:"in"},[n("div",{staticClass:"user"},[t._m(0),t._v(" "),n("div",{staticClass:"user-input"},[n("input",{ref:"inStats",class:t.err?"":"err",attrs:{type:"text"},on:{blur:function(e){t.inUser()}}})])]),t._v(" "),n("div",{staticClass:"password"},[t._m(1),t._v(" "),n("div",{staticClass:"password-input"},[n("input",{ref:"inPass",attrs:{type:"password"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.signIn()}}})])]),t._v(" "),n("button",{on:{click:function(e){t.signIn()}}},[t._v("\n                      登录\n              ")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.clickMenu,expression:"!clickMenu"}],staticClass:"up"},[n("div",{staticClass:"user"},[t._m(2),t._v(" "),n("div",{staticClass:"user-input"},[n("input",{ref:"upStats",class:t.err?"":"err",attrs:{type:"text"},domProps:{value:(t.mesState,"")}})])]),t._v(" "),n("div",{staticClass:"password"},[t._m(3),t._v(" "),n("div",{staticClass:"password-input"},[n("input",{ref:"upPass",attrs:{type:"password"},domProps:{value:(t.mesState,"")},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.signUp()}}})])]),t._v(" "),n("button",{on:{click:function(e){t.signUp()}}},[t._v("注册")])]),t._v(" "),n("a",{staticClass:"skip",on:{click:function(e){t.skip()}}},[t._v("随便看看")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"user-i"},[e("i",{staticClass:"fa fa-user"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"password-i"},[e("i",{staticClass:"fa fa-unlock-alt"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"user-i"},[e("i",{staticClass:"fa fa-user"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"password-i"},[e("i",{staticClass:"fa fa-unlock-alt"})])}]};var f=n("8AGX")(d,v,!1,function(t){n("zcHQ")},null,null).exports,h={name:"message",computed:i()({},Object(a.c)(["mesState","mesTitle"]))},w={render:function(){var t=this.$createElement,e=this._self._c||t;return this.mesState?e("div",{staticClass:"message",class:this.mesState},[e("i",{staticClass:"fa",class:"err"==this.mesState?"fa-info  faa-horizontal animated":"fa-check  faa-horizontal animated"}),this._v("\n    "+this._s(this.mesTitle)+"\n  ")]):this._e()},staticRenderFns:[]};var g={name:"app",components:{Top:m,Login:f,Message:n("8AGX")(h,w,!1,function(t){n("Szx7")},null,null).exports},computed:i()({},Object(a.c)(["loginBJ"])),mounted:function(){this.$store.commit("local")}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Message"),this._v(" "),this.loginBJ?this._e():e("Login"),this._v(" "),this.loginBJ?e("Top"):this._e(),this._v(" "),this.loginBJ?e("router-view"):this._e()],1)},staticRenderFns:[]};var _=n("8AGX")(g,p,!1,function(t){n("MgwY")},null,null).exports,C=n("zO6J"),S=n("a3Yh"),b=n.n(S),T=n("E4C3"),M=n.n(T),N={name:"NewDetail",computed:i()({},Object(a.c)(["newShow","newTitle","newConent","newComment","newTime","newTag","newGood","newName"])),methods:{newClose:function(t){"news animate"!=t.target.className&&"fa fa-close fa-2x"!=t.target.className||this.$store.commit("newClose")},setComment:function(t){var e=new Date,n=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds();this.$store.dispatch("setComment",[this.$refs.comment.value,n]),this.$refs.comment.value=""},addNewGood:function(){this.$store.dispatch("addNewGood")}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"news",class:t.newShow?"animate":"",on:{click:function(e){e.stopPropagation(),t.newClose(e)}}},[s("div",{staticClass:"news-container"},[s("i",{staticClass:"fa fa-close fa-2x",on:{click:function(e){t.newClose(e)}}}),t._v(" "),s("div",{staticClass:"news-title"},[s("img",{attrs:{src:n("Gj0j"),alt:""}}),t._v(" "),s("h2",[t._v(t._s(t.newName))])]),t._v(" "),s("div",{staticClass:"operation"},[s("li",[s("i",{staticClass:"fa fa-tags"}),t._v(" "),t._l(t.newTag,function(e,n){return s("span",{key:n},[t._v(t._s(e))])})],2),t._v(" "),s("li",[s("i",{staticClass:"fa fa-calendar"}),t._v(" "),s("span",[t._v(t._s(t.newTime))])]),t._v(" "),t._m(0),t._v(" "),s("li",{on:{click:t.addNewGood}},[s("i",{staticClass:"fa fa-thumbs-o-up"}),t._v(" "),s("span",[t._v(t._s(t.newGood||0))])]),t._v(" "),s("li",[s("i",{staticClass:"fa fa-commenting-o"}),t._v(" "),s("span",[t._v(t._s(t.newComment.length||"0"))])])]),t._v(" "),s("div",{staticClass:"overy"},[s("section",[t._v("\n          "+t._s(t.newConent)+"\n          ")]),t._v(" "),s("div",{staticClass:"new-comments"},[s("p",[t._v("评论("+t._s(t.newComment.length||"0")+")")])]),t._v(" "),s("div",{staticClass:"comment-content"},[t._l(t.newComment,function(e,n){return t.newComment?s("li",{key:n},[s("div",{staticClass:"comment-operation"},[s("div",{staticClass:"comment-name"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"comment-time"},[t._v("发表时间："+t._s(e.time))])]),t._v(" "),e.content?s("div",{staticClass:"comment-content",domProps:{innerHTML:t._s(e.content)}}):t._e()]):t._e()}),t._v(" "),t.newComment?t._e():s("div",{staticClass:"comment-err"},[t._v("\n                  (空)\n              ")])],2)]),t._v(" "),s("div",{staticClass:"comment"},[s("input",{ref:"comment",attrs:{type:"text"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.setComment(e)}}}),t._v(" "),s("button",{on:{click:function(e){t.setComment(e)}}},[s("i",{staticClass:"fa fa-paper-plane fa-2x"}),t._v("评论")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("i",{staticClass:"fa fa-eye"}),this._v(" "),e("span",[this._v("1")])])}]};var x=n("8AGX")(N,k,!1,function(t){n("4qwy")},null,null).exports,y={name:"NewsModify",data:function(){return{editorContent:"",loadText:"",editorTitle:this.$store.state.newModTitle}},computed:i()({},Object(a.c)(["newModShow","newModTitle","newModContent"])),methods:{newModClose:function(t){"newsModify newsModify-animate"!=t.target.className&&"fa fa-close fa-2x"!=t.target.className||this.$store.commit("newModClose")},setContent:function(){var t=this;console.log(this.editorContent);var e=new r.a("#editorElem");e.customConfig.onchange=function(e){t.editorContent=e},e.create(),this.$store.dispatch("editMod",[this.$refs.modTitle.value,this.editorContent]),e.txt.html(this.editorContent=this.loadText=""),this.$refs.modTitle.value=""},delContent:function(){this.$store.commit("clearNewMod"),this.$refs.modTitle.value=""}},watch:{newModContent:function(){var t=this,e=new r.a("#editorElem");e.customConfig.onchange=function(e){t.editorContent=e},e.create(),e.txt.html(this.editorContent=this.loadText=this.newModContent)},newModTitle:function(){this.editorTitle=this.$store.state.newModTitle},deep:!0},mounted:function(){var t=new r.a("#editorElem");t.create(),t.txt.html(this.editorContent=this.loadText=this.newModContent),this.$refs.modTitle.value=this.newModTitle}},$={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"newsModify",class:t.newModShow?"newsModify-animate":"",on:{click:function(e){t.newModClose(e)}}},[s("div",{staticClass:"news-mod"},[s("i",{staticClass:"fa fa-close fa-2x",on:{click:function(e){t.newModClose(e)}}}),t._v(" "),s("div",{staticClass:"news-title"},[s("img",{attrs:{src:n("Gj0j"),alt:""}}),t._v(" "),s("h2",[t._v(t._s(t.editorTitle))])]),t._v(" "),s("div",{staticClass:"opacmod"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.editorTitle,expression:"editorTitle"}],ref:"modTitle",attrs:{type:"text",placeholder:"标题"},domProps:{value:t.editorTitle},on:{input:function(e){e.target.composing||(t.editorTitle=e.target.value)}}}),t._v(" "),s("div",{staticStyle:{"text-align":"left"},attrs:{id:"editorElem"}}),t._v(" "),s("div",{staticClass:"operation"},[s("button",{on:{click:t.delContent}},[t._v("清空内容")]),t._v(" "),s("button",{on:{click:t.setContent}},[t._v("确定修改")])])])])])},staticRenderFns:[]};var j,B=(j={data:function(){return{className:"全部",loading:!1,getlist:1,tagList:[{tagName:"全部"},{tagName:"JavaScript"},{tagName:"Webpack"},{tagName:"Sass"},{tagName:"Nodejs"},{tagName:"Vue"}]}},components:{NewsDetail:x,NewsModify:n("8AGX")(y,$,!1,function(t){n("lOEH")},null,null).exports},methods:i()({},Object(a.b)(["getallState"])),computed:i()({},Object(a.c)(["getCont","loginBJ"]))},b()(j,"methods",{getcontent:function(){var t=this;this.getlist++,this.loading=!0,M.a.start(),this.$store.dispatch("getallState",{getlist:this.getlist,tabName:"news",className:this.className}).then(function(e){setInterval(function(){t.loading=!1},1e3),M.a.done()})},getNews:function(t){this.$store.dispatch("getNews",t)},newModShow:function(t){this.$store.dispatch("newModShow",t)},removeNew:function(t){this.$store.dispatch("removeNew",t)}}),b()(j,"mounted",function(){var t=this;window.addEventListener("scroll",function(){document.documentElement.scrollTop+window.innerHeight>=document.body.clientHeight-50&&"/"==t.$route.path&&t.getcontent()})}),b()(j,"created",function(){M.a.start(),this.$store.dispatch("getallState",{getlist:this.getlist,tabName:"news",className:this.className}),M.a.done()}),j),A={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"container"},[n("div",{staticClass:"tag"},t._l(t.tagList,function(e,s){return n("li",{key:s},[n("span",{class:t.className==e.tagName?"active":"",on:{click:function(n){t.getlist=0,t.className=e.tagName,t.getcontent()}}},[t._v("\r\n                        "+t._s(e.tagName)+"\r\n                ")])])})),t._v(" "),n("section",{staticClass:"news-list container"},t._l(t.getCont,function(e,s){return n("div",{key:s,staticClass:"zd-md-12 news-item"},[n("a",{on:{click:function(n){t.getNews(e.id)}}},[t._v(t._s(e.attributes.title))]),t._v(" "),e.attributes.content?n("p",{domProps:{innerHTML:t._s(e.attributes.content.replace(/<\/?[^>]*>/g,""))}}):t._e(),t._v(" "),n("div",{staticClass:"me-tag"},t._l(e.attributes.newTag,function(e,s){return n("a",{key:s,on:{click:function(n){t.className=e,t.getcontent()}}},[t._v(t._s(e))])})),t._v(" "),e.createdAt?n("div",{staticClass:"news-time"},[n("span",[t._v("发布时间："+t._s(e.createdAt))])]):t._e(),t._v(" "),n("div",{staticClass:"operation"},[n("i",{staticClass:"fa fa-trash faa-wrench animated-hover",attrs:{alt:"删除",title:"删除"},on:{click:function(n){t.removeNew([e.id,e.attributes.newName])}}}),t._v(" "),n("i",{staticClass:"fa fa-wpforms faa-wrench animated-hover",attrs:{alt:"修改",title:"修改"},on:{click:function(n){t.newModShow([e.id,e.attributes.title,e.attributes.content,e.attributes.newName])}}})])])})),t._v(" "),n("div",{staticClass:"loading"},[t.loading?n("div",[t.loginBJ?n("i",{staticClass:"fa fa-spinner faa-spin animated"}):t._e(),t._v(" \r\n                数据加载中.....\r\n        ")]):t._e(),t._v(" "),t.loading?t._e():n("div",[t._v("暂无数据")])])]),t._v(" "),n("NewsDetail"),t._v(" "),n("NewsModify")],1)},staticRenderFns:[]};var E=n("8AGX")(B,A,!1,function(t){n("9cFS")},null,null).exports,G={name:"about",data:function(){return{editShow:!0,preCont:""}},computed:i()({},Object(a.c)(["aboutContent"])),methods:{editAbout:function(){var t=this,e=new r.a("#editorEleml");e.customConfig.onchange=function(e){t.preCont=e},e.create(),e.txt.html(this.aboutContent)},setAboutCont:function(){this.$store.dispatch("setAboutCont",this.preCont)},edit:function(){var t=this;this.$store.dispatch("getAboutCont");var e=new r.a("#editorEleml");e.customConfig.onchange=function(e){t.preCont=e},e.create(),e.txt.html(this.aboutContent)}},watch:{aboutContent:function(){this.preCont=this.aboutContent}},mounted:function(){this.$store.dispatch("getAboutCont");var t=this,e=new r.a("#editorEleml");e.customConfig.onchange=function(e){t.preCont=e},e.create()}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[n("div",{staticClass:"edit-about",on:{click:function(e){t.editShow=!1,t.edit()}}},[t._v("编辑")]),t._v(" "),t.editShow?n("div",{staticClass:"about-content",domProps:{innerHTML:t._s(t.aboutContent)}},[t._v("\n        1\n    ")]):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.editShow,expression:"!editShow"}],staticClass:"editSec"},[n("div",{staticStyle:{"text-align":"left"},attrs:{id:"editorEleml"}}),t._v(" "),n("span",{staticClass:"edit-suc",on:{click:function(e){t.setAboutCont(),t.editShow=!0}}},[t._v("确定")])])])},staticRenderFns:[]};var O=n("8AGX")(G,I,!1,function(t){n("6wUV")},null,null).exports;s.a.use(C.a);var P,U=new C.a({routes:[{path:"/",name:"Content",component:E},{path:"/about",name:"About",component:O}]});s.a.use(a.a);var J={local:function(t){localStorage.getItem("name")?t.loginBJ=!0:t.loginBJ=!1},cleanlocal:function(t){M.a.start(),localStorage.removeItem("name"),location.reload(!1),M.a.done()},login:function(){Bmob.initialize("7150849514c91ed37625710a29c91139","243c886d51cc5d468ccef730afe00cba")},resetMes:function(t){t.mesState=t.mesTitle="",""!=t.mesState&&t.mesTitle!=t.mesTitle&&(t.mesState=t.mesTitle=""),console.log(t.mesState,t.mesTitle)},getallState:function(t,e){var n=Bmob.Object.extend(e.tabName),s=new Bmob.Query(n);e.getlist&&s.limit(6*e.getlist),"全部"!=e.className&&s.equalTo("newTag",e.className),s.descending("createdAt"),s.find({success:function(e){t.getCont=e},error:function(t){console.log("查询失败: "+t.code+" "+t.message)}})},inStats:function(t,e){var n=Bmob.Object.extend("user_name"),s=new Bmob.Query(n);e.inUser&&s.equalTo("name",e.inUser),e.inPassword&&s.equalTo("password",e.inPassword),s.find({success:function(n){void 0!=e.inUser&&n.length>0?(n[0].attributes.name==e.inUser&&(t.err=!0),n[0].attributes.password==e.inPassword&&(M.a.start(),t.loginBJ=!0,t.mesState="suc",localStorage.setItem("name",n[0].attributes.name),t.mesTitle=n[0].attributes.name+" , 欢迎您!",M.a.done())):e.inPassword?(t.mesState="err",t.mesTitle="登录失败"):t.err=!1},error:function(n){e.inPassword?(t.mesState="err",t.mesTitle="登录失败"):t.err=!1}})},signUp:function(t,e){if(e){var n=new(Bmob.Object.extend("user_name"));n.set("name",e.upUser),n.set("password",e.upPass),n.save(null,{success:function(n){n.id&&e.upUser&&e.upPass?(M.a.start(),t.mesState="suc",t.mesTitle="注册成功",console.log("创建成功"),M.a.done()):(t.mesState="err",t.mesTitle="注册失败",console.log("失败"))},error:function(e,n){t.mesState="err",t.mesTitle="注册失败",console.log("创建日记失败")}})}},skip:function(t){t.loginBJ=!0},errState:function(t){t.err=!0},getNews:function(t,e){M.a.start();var n=Bmob.Object.extend("news");new Bmob.Query(n).get(e,{success:function(e){console.log(e),t.newShow=!0,t.newID=e.id,t.newTitle=e.get("title"),t.newComent=e.get("content"),t.newComment=e.get("comment")?Array.prototype.reverse.call(e.get("comment")):[],t.newTime=e.createdAt,t.newTag=e.get("newTag"),t.newGood=e.get("newGood"),t.newName=e.attributes.newName,console.log(t.newName),M.a.done()},error:function(e,n){t.mesState="err",t.mesTitle="获取失败",t.newShow=!1,console.log("获取失败")}})},setComment:function(t,e){e[0]||alert("不能为空"),t.loginBJ||(t.mesState="err",t.mesTitle="未登录",t.loginBJ=!0,setTimeout(function(){location.reload(!1)},2e3)),M.a.start();var n=Bmob.Object.extend("news");new Bmob.Query(n).get(t.newID,{success:function(n){var s={name:localStorage.getItem("name"),time:e[1],content:e[0]};n.addUnique("comment",s),n.save(),t.newComment=n.attributes.comment.reverse(),n&&(t.mesState="suc"),t.mesTitle="评论成功",M.a.done()},error:function(e,n){t.mesState="err",t.mesTitle="评论失败"}})},newClose:function(t){t.newShow=!1},editMod:function(t,e){t.newModId||(t.mesState="err"),t.mesTitle="错误",M.a.start();var n=Bmob.Object.extend("news");new Bmob.Query(n).get(t.newModId,{success:function(n){for(var s in t.getCont)t.getCont[s].id==t.newModId&&(t.getCont[s].attributes.title=e[0],t.getCont[s].attributes.content=e[1]);n.set("title",e[0]),n.set("content",e[1]),n.save(),t.mesState="suc",t.mesTitle="编辑成功",t.newModShow=!1,M.a.done()},error:function(e,n){t.mesState="err",t.mesTitle="错误"}})},addNewGood:function(t){t.newGood=!t.newGood;var e=Bmob.Object.extend("news");new Bmob.Query(e).get(t.newModId,{success:function(e){e.set("newGood",!1),console.log(t.newGood),e.save()},error:function(e,n){t.mesState="err",t.mesTitle="错误"}})},newModClose:function(t){t.newModShow=!1},newModShow:function(t,e){if(e[3]!=localStorage.getItem("name"))return t.mesState="err",t.mesTitle="无权限修改",console.log(t.mesState,t.mesTitle),!1;t.newModId=e[0],t.newModTitle=e[1],t.newModContent=e[2],t.newModShow=!0},clearNewMod:function(t){t.newModContent=" "},removeNew:function(t,e){if(e[1]!=localStorage.getItem("name"))return t.mesState="err",t.mesTitle="无权限删除",console.log(t.mesState,t.mesTitle),!1;M.a.start();var n=Bmob.Object.extend("news");new Bmob.Query(n).get(e[0],{success:function(e){e.destroy({success:function(e){for(var n in t.getCont)t.getCont[n].id==e.id&&t.getCont.splice(n,1);t.mesState="suc",t.mesTitle="删除成功",console.log("删除成功"),M.a.done()},error:function(e,n){t.mesState="err",t.mesTitle="删除失败",n&&console.log("删除失败")}})},error:function(e,n){t.mesState="err",t.mesTitle="删除失败",n&&console.log("query object fail")}})},getAboutCont:function(t){M.a.start();var e=Bmob.Object.extend("about");new Bmob.Query(e).find({success:function(e){console.log("共查询到 "+e.length+" 条记录");for(var n=0;n<e.length;n++){var s=e[n];t.aboutID=s.id,t.aboutContent=s.attributes.aboutContent,M.a.done()}},error:function(t){console.log("查询失败: "+t.code+" "+t.message)}})},setAboutCont:function(t,e){var n=Bmob.Object.extend("about");new Bmob.Query(n).get(t.aboutID,{success:function(n){n.set("aboutContent",e),n.save(),t.aboutContent=e,t.mesState="suc",t.mesTitle="修改成功"},error:function(e,n){t.mesState="err",t.mesTitle="错误"}})},pushNews:function(t,e){if(""==e[0]&&""==e[1])return t.mesState="err",void(t.mesTitle="标题或内容不得为空");console.log(e);var n=new(Bmob.Object.extend("news"));n.set("title",e[0]),n.set("content",e[1]),n.set("newTag",e[2]),n.set("newName",localStorage.getItem("name")),n.save(null,{success:function(e){e&&(t.mesState="suc",t.mesTitle="发布成功",t.pushShow=!1,t.getCont.unshift(e))},error:function(e,n){t.mesState="err",t.mesTitle="发布失败"}})},addShow:function(t){t.pushShow=!0},cloShow:function(t){t.pushShow=!1}},D=(P={getallState:function(t,e){var n=t.commit;n("resetMes"),n("login"),n("getallState",e)},inStats:function(t,e){var n=t.commit;n("resetMes"),n("login"),n("inStats",e)},signUp:function(t,e){var n=t.commit;n("resetMes"),n("login"),n("signUp",e)},getNews:function(t,e){var n=t.commit;n("resetMes"),n("login"),n("getNews",e)},setComment:function(t,e){var n=t.commit;n("resetMes"),n("setComment",e)},newModShow:function(t,e){var n=t.commit;n("resetMes"),n("newModShow",e)},addNewGood:function(t){var e=t.commit;e("resetMes"),e("login"),e("addNewGood")},editMod:function(t,e){var n=t.commit;n("resetMes"),n("login"),n("editMod",e)}},b()(P,"newModShow",function(t,e){var n=t.commit;n("resetMes"),n("newModShow",e)}),b()(P,"removeNew",function(t,e){var n=t.commit;n("resetMes"),n("removeNew",e)}),b()(P,"getAboutCont",function(t){var e=t.commit;e("resetMes"),e("login"),e("getAboutCont")}),b()(P,"setAboutCont",function(t,e,n){var s=t.commit;s("resetMes"),s("login"),s("setAboutCont",e)}),b()(P,"pushNews",function(t,e,n){var s=t.commit;s("resetMes"),s("login"),s("pushNews",e)}),P),H=new a.a.Store({state:{mesState:"",mesTitle:"",newID:"",newShow:!1,newTitle:"",newContent:"",newComment:"",newTime:"",newTag:"",newGood:"",newName:"",newModId:"",newModShow:!1,newModTitle:"",newModContent:"",pushShow:!1,aboutContent:"",aboutID:"",err:!0,loginBJ:!1,getCont:""},mutations:J,actions:D});n("ve9D"),n("HBSQ"),n("YfC1");s.a.use(M.a),s.a.config.productionTip=!1,new s.a({el:"#app",router:U,store:H,template:"<App/>",components:{App:_}})},Szx7:function(t,e){},YfC1:function(t,e){},kARj:function(t,e){},lOEH:function(t,e){},ve9D:function(t,e){},zcHQ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.47a8daa6e13a82db9b6f.js.map